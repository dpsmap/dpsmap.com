!function(s){var n=function(t,i){this.cinit("clickover",t,i)};n.prototype=s.extend({},s.fn.popover.Constructor.prototype,{constructor:n,cinit:function(t,i,e){this.attr={},this.attr.me=(10*Math.random()+"").replace(/\D/g,""),this.attr.click_event_ns="click."+this.attr.me+" touchstart."+this.attr.me,e||(e={}),e.trigger="manual",this.init(t,i,e),this.$element.on("click",this.options.selector,s.proxy(this.clickery,this))},clickery:function(t){if(t&&(t.preventDefault(),t.stopPropagation()),this.options.width&&this.tip().width(this.options.width),this.options.height&&this.tip().height(this.options.height),this.options.tip_id&&this.tip().attr("id",this.options.tip_id),this.options.class_name&&this.tip().addClass(this.options.class_name),this[this.isShown()?"hide":"show"](),this.isShown()){var i=this;this.options.global_close&&s("body").on(this.attr.click_event_ns,function(t){i.tip().has(t.target).length||i.clickery()}),this.options.esc_close&&s(document).bind("keyup.clickery",function(t){27==t.keyCode&&i.clickery()}),!this.options.allow_multiple&&s("[data-clickover-open=1]").each(function(){s(this).data("clickover")&&s(this).data("clickover").clickery()}),this.$element.attr("data-clickover-open",1),this.tip().on("click",'[data-dismiss="clickover"]',s.proxy(this.clickery,this)),this.options.auto_close&&0<this.options.auto_close&&(this.attr.tid=setTimeout(s.proxy(this.clickery,this),this.options.auto_close)),"function"==typeof this.options.onShown&&this.options.onShown.call(this),this.$element.trigger("shown")}else this.$element.removeAttr("data-clickover-open"),this.options.esc_close&&s(document).unbind("keyup.clickery"),s("body").off(this.attr.click_event_ns),"number"==typeof this.attr.tid&&(clearTimeout(this.attr.tid),delete this.attr.tid),"function"==typeof this.options.onHidden&&this.options.onHidden.call(this),this.$element.trigger("hidden")},isShown:function(){return this.tip().hasClass("in")},resetPosition:function(){var t,i,e,o,s,n,h;if(this.hasContent()&&this.enabled){switch(t=this.tip(),n="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=/in/.test(n),e=this.getPosition(i),o=t[0].offsetWidth,s=t[0].offsetHeight,i?n.split(" ")[1]:n){case"bottom":h={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case"top":h={top:e.top-s,left:e.left+e.width/2-o/2};break;case"left":h={top:e.top+e.height/2-s/2,left:e.left-o};break;case"right":h={top:e.top+e.height/2-s/2,left:e.left+e.width}}t.css(h)}},debughide:function(){var t=(new Date).toString();console.log(t+": clickover hide"),this.hide()}}),s.fn.clickover=function(o){return this.each(function(){var t=s(this),i=t.data("clickover"),e="object"==typeof o&&o;i||t.data("clickover",i=new n(this,e)),"string"==typeof o&&i[o]()})},s.fn.clickover.Constructor=n,s.fn.clickover.defaults=s.extend({},s.fn.popover.defaults,{trigger:"manual",auto_close:0,global_close:1,esc_close:1,onShown:null,onHidden:null,width:null,height:null,tip_id:null,class_name:"clickover",allow_multiple:0})}(window.jQuery);